(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{444:function(e,t,i){var a=i(595);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,i(2).default)("21b08cac",a,!1,{})},594:function(e,t,i){"use strict";var a=i(444);i.n(a).a},595:function(e,t,i){(e.exports=i(1)()).push([e.i,"\n.active-add-page[data-v-0b178c8a] {\n  width: 100%;\n  height: 100%;\n}\ninput[data-v-0b178c8a] {\n  width: 5.33333rem;\n}\n._mr-36[data-v-0b178c8a] {\n  margin-right: 0.48rem;\n}\n._header[data-v-0b178c8a] {\n  height: 4rem;\n}\n._header .upload[data-v-0b178c8a] {\n    position: relative;\n    overflow: hidden;\n    width: 2.13333rem;\n    height: 2.13333rem;\n    border-radius: 1.06667rem;\n    background-color: #eaeaea;\n}\n._header .upload ._tip[data-v-0b178c8a] {\n      position: absolute;\n      bottom: 0;\n      left: 0;\n      right: 0;\n      margin: 0 auto;\n      text-align: center;\n      background-color: #0085ff;\n      color: #ffffff;\n      font-size: 0.26667rem;\n      height: 0.58667rem;\n      line-height: 0.58667rem;\n}\n.item[data-v-0b178c8a] {\n  height: 1.17333rem;\n  line-height: 1.17333rem;\n}\n.item input[data-v-0b178c8a] {\n    height: 1.06667rem;\n    line-height: 1.06667rem;\n}\n",""])},610:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page active-add"},[i("fp-title",{attrs:{title:"创建活动"}}),e._v(" "),i("div",{staticClass:"g-bg-white g-pd-lr-20"},[i("div",{staticClass:"_header g-flex-cc"},[i("div",{staticClass:"upload g-flex-cc",on:{click:e.handleUpload}},[i("img",{staticStyle:{width:"100%"},attrs:{src:e.avatars}}),e._v(" "),i("span",{staticClass:"_tip"},[e._v("上传照片")]),e._v(" "),i("input",{ref:"avatars",staticStyle:{display:"none"},attrs:{type:"file",id:"avatars_img",name:"avatars_img"},on:{change:e.handleChange}})])]),e._v(" "),i("div",{staticClass:"item g-flex-ac g-jc-sb g-fs-26 g-bb"},[i("span",[e._v("活动标题")]),e._v(" "),i("input",{directives:[{name:"fv-check",rawName:"v-fv-check",value:{rules:["required"],req_msg:"活动标题不能为空"},expression:'{\n          rules: ["required"],\n          req_msg: "活动标题不能为空"\n        }'},{name:"model",rawName:"v-model",value:e.fullname,expression:"fullname"}],staticClass:"g-tr _mr-36",attrs:{id:"user-fullname",placeholder:"请填写"},domProps:{value:e.fullname},on:{input:function(t){t.target.composing||(e.fullname=t.target.value)}}})]),e._v(" "),i("div",{staticClass:"item g-flex-ac g-jc-sb g-fs-26 g-bb"},[i("span",[e._v("活动人数")]),e._v(" "),i("input",{directives:[{name:"fv-check",rawName:"v-fv-check",value:{rules:["required"],req_msg:"活动人数不能为空"},expression:'{\n          rules: ["required"],\n          req_msg: "活动人数不能为空"\n        }'},{name:"model",rawName:"v-model",value:e.peoplenumber,expression:"peoplenumber"}],staticClass:"g-tr _mr-36",attrs:{id:"user-number",placeholder:"请填写"},domProps:{value:e.peoplenumber},on:{input:function(t){t.target.composing||(e.peoplenumber=t.target.value)}}})]),e._v(" "),i("div",{staticClass:"item g-flex-ac g-jc-sb g-fs-26 g-bb"},[i("span",[e._v("活动开始时间")]),e._v(" "),i("div",{on:{click:e.handleStartTime}},[i("input",{directives:[{name:"fv-check",rawName:"v-fv-check",value:{rules:["required"],req_msg:"活动开始时间不能为空"},expression:'{\n              rules: ["required"],\n              req_msg: "活动开始时间不能为空"\n          }'},{name:"model",rawName:"v-model",value:e.start_time_cn,expression:"start_time_cn"}],staticClass:"g-tr",attrs:{disabled:"",id:"user-start_time",placeholder:"请选择"},domProps:{value:e.start_time_cn},on:{input:function(t){t.target.composing||(e.start_time_cn=t.target.value)}}}),e._v(" "),i("i",{staticClass:"iconfont icon-right g-c-999"})])]),e._v(" "),i("div",{staticClass:"item g-flex-ac g-jc-sb g-fs-26 g-bb"},[i("span",[e._v("活动结束时间")]),e._v(" "),i("div",{on:{click:e.handleEndTime}},[i("input",{directives:[{name:"fv-check",rawName:"v-fv-check",value:{rules:["required"],req_msg:"活动结束时间不能为空"},expression:'{\n                  rules: ["required"],\n                  req_msg: "活动结束时间不能为空"\n              }'},{name:"model",rawName:"v-model",value:e.end_time_cn,expression:"end_time_cn"}],staticClass:"g-tr",attrs:{disabled:"",id:"user-end_time",placeholder:"请选择"},domProps:{value:e.end_time_cn},on:{input:function(t){t.target.composing||(e.end_time_cn=t.target.value)}}}),e._v(" "),i("i",{staticClass:"iconfont icon-right g-c-999"})])]),e._v(" "),i("div",{staticClass:"item g-flex-ac g-jc-sb g-fs-26 g-bb"},[i("span",[e._v("活动地址")]),e._v(" "),i("div",{on:{click:e.handleAddr}},[i("input",{directives:[{name:"fv-check",rawName:"v-fv-check",value:{rules:["required"],req_msg:"互动地址不能为空"},expression:'{\n                  rules: ["required"],\n                  req_msg: "互动地址不能为空"\n              }'},{name:"model",rawName:"v-model",value:e.district_cn,expression:"district_cn"}],staticClass:"g-tr",attrs:{disabled:"",id:"user-address",placeholder:"请选择"},domProps:{value:e.district_cn},on:{input:function(t){t.target.composing||(e.district_cn=t.target.value)}}}),e._v(" "),i("i",{staticClass:"iconfont icon-right g-c-999"})])]),e._v(" "),i("div",{staticClass:"item g-flex-ac g-jc-sb g-fs-26 g-bb"},[i("span",[e._v("详细地址")]),e._v(" "),i("input",{directives:[{name:"fv-check",rawName:"v-fv-check",value:{rules:["required"],req_msg:"详细地址不能为空"},expression:'{\n              rules: ["required"],\n              req_msg: "详细地址不能为空"\n          }'},{name:"model",rawName:"v-model",value:e.detail_address,expression:"detail_address"}],staticClass:"g-tr _mr-36",attrs:{id:"user-address",placeholder:"请填写"},domProps:{value:e.detail_address},on:{input:function(t){t.target.composing||(e.detail_address=t.target.value)}}})]),e._v(" "),i("div",{staticClass:"item g-flex-ac g-jc-sb g-fs-26 g-bb"},[i("span",[e._v("票种设置")]),e._v(" "),i("div",{staticClass:"g-c-999",on:{click:e.handleSetTicket}},[e._v("已设置0个票种")])]),e._v(" "),i("div",{staticClass:"item g-flex-ac g-jc-sb g-fs-26 g-bb",on:{click:e.handleForm}},[i("span",[e._v("报名表单设置")]),e._v(" "),e.checkList.length?i("div",{},[e._v(e._s(e.checkList.join(",")))]):i("div",{staticClass:"g-c-999"},[e._v("默认为姓名、 手机号、 邮箱")]),e._v(" "),i("input",{directives:[{name:"fv-check",rawName:"v-fv-check",value:{rules:["required"],req_msg:"报名表单设置不能为空"},expression:'{\n                  rules: ["required"],\n                  req_msg: "报名表单设置不能为空"\n              }'},{name:"model",rawName:"v-model",value:e.checkList,expression:"checkList"}],staticStyle:{display:"none"},attrs:{disabled:"",id:"user-address",s:"",placeholder:"请选择"},domProps:{value:e.checkList},on:{input:function(t){t.target.composing||(e.checkList=t.target.value)}}})]),e._v(" "),e._m(0),e._v(" "),i("cube-popup",{ref:"myPopup2",attrs:{type:"my-popup",position:"bottom"}},[i("div",{staticClass:"g-bg-white g-pd-20 g-tc"},[i("cube-checkbox-group",{attrs:{options:e.options},model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}}),e._v(" "),i("button",{staticClass:"g-btn-blue g-m-t-80",staticStyle:{margin:"0 auto"},on:{click:e.handleFormHide}},[e._v("\n                  完成\n              ")])],1)]),e._v(" "),i("div",{staticClass:"g-flex-cc"},[i("button",{staticClass:"g-btn-blue g-m-t-80",on:{click:e.handleSubmit}},[e._v("\n          完成\n        ")])])],1)],1)};a._withStripped=!0;var s=i(8),n=i(66),c={components:{"fp-title":s.a},data:function(){return{avatars:"",fullname:"",peoplenumber:"",start_time:"",start_time_cn:"",end_time:"",end_time_cn:"",district_cn:"",district:"",sdistrict:"",detail_address:"",checkList:[],options:[{label:"姓名",value:"姓名",disabled:!1},{label:"手机号",value:"手机号",disabled:!1},{label:"邮箱",value:"邮箱",disabled:!1}]}},computed:{addrData:function(){return this.$store.getters["local/address"]}},created:function(){this.$store.dispatch("local/address",{});var e=this.$store.getters["active/add/get"];this.avatars=e.avatars,this.fullname=e.fullname,this.peoplenumber=e.peoplenumber,this.start_time=e.start_time,this.start_time_cn=e.start_time_cn,this.end_time=e.end_time,this.end_time_cn=e.end_time_cn,this.district_cn=e.district_cn,this.district=e.district,this.sdistrict=e.sdistrict,this.detail_address=e.detail_address,this.checkList=e.checkList||[]},methods:{handleSetTicket:function(){var e=this;this.$store.dispatch("active/add/setInfo",{avatars:this.avatars,fullname:this.fullname,peoplenumber:this.peoplenumber,start_time:this.start_time,start_time_cn:this.start_time_cn,end_time:this.end_time,end_time_cn:this.end_time_cn,district_cn:this.district_cn,district:this.district,sdistrict:this.sdistrict,detail_address:this.detail_address,checkList:this.checkList}).then(function(){e.$router.push("/active/add/ticket-edit")})},handleForm:function(){this.$refs.myPopup2.show()},handleFormHide:function(){this.$refs.myPopup2.hide()},handleUpload:function(){this.$refs.avatars.click()},handleChange:function(e){var t=this;this.$Indicator.open(),this.$store.dispatch("mine/baseInfo/uploadAvatar",{fileElementId:"avatars_img"}).then(function(e){t.$Indicator.close(),t.avatars=e.avatars,$('input[type="file"]').change(function(e){t.handleChange(e)})}).catch(function(e){t.$Indicator.close(),$('input[type="file"]').change(function(e){t.handleChange(e)})})},handleStartTime:function(){var e=this;this.startPicker||(this.startPicker=this.$createDatePicker({title:"",min:new Date(1980,0,1),max:new Date(2030,11,30),columnCount:6,value:this.job_time?new Date(this.job_time):new Date,onSelect:function(t,i,a){e.start_time=t.getTime()/1e3,e.start_time_cn=a.slice(0,3).join("-")+" "+a.slice(3,6).join(":")}})),this.startPicker.show()},handleEndTime:function(){var e=this;this.endPicker||(this.endPicker=this.$createDatePicker({title:"",min:new Date(1980,0,1,8,0,0),max:new Date(2030,11,30,20,59,59),columnCount:6,value:this.job_time?new Date(this.job_time):new Date,onSelect:function(t,i,a){e.end_time=t.getTime()/1e3,e.end_time_cn=a.slice(0,3).join("-")+" "+a.slice(3,6).join(":")}})),this.endPicker.show()},handleAddr:function(){var e=this;this.addrPicker||(this.addrPicker=this.$createCascadePicker({title:"",data:this.addrData,selectedIndex:Object(n.d)(this.addrData,[this.district||0,this.sdistrict||0]),onSelect:function(t,i,a){e.district_cn=a.join("/"),e.district=t[0],e.sdistrict=t[1]}})),this.addrPicker.show()},handleSubmit:function(){var e=this;this.$fv.checkAll("user",function(t){0==t?(e.$Indicator.open(),e.$store.dispatch("active/add/save",{fullname:e.fullname,sex:e.sex,sex_cn:e.sex_cn,birthdate:e.birthdate,job_time:e.job_time,district:e.district,sdistrict:e.sdistrict,district_cn:e.district_cn,education:e.education,education_cn:e.education_cn,telephone:e.telephone,email:e.email}).then(function(t){e.$Indicator.close(),e.$router.back()}).catch(function(t){e.$Indicator.close()})):e.$Toast({message:t[0].checker.message,duration:1500})})}}},r=(i(594),i(0)),d=Object(r.a)(c,a,[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"item g-flex-ac g-jc-sb g-fs-26 g-bb"},[t("span",[this._v("活动详情")]),this._v(" "),t("div",{staticClass:"g-c-999"},[this._v("编辑")])])}],!1,null,"0b178c8a",null);d.options.__file="views/active/children/add.vue";t.default=d.exports}}]);